<UserControl
    x:Class="LehrplanGenerator.Views.Auth.RegisterView"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="using:LehrplanGenerator.ViewModels.Auth"
    x:DataType="vm:RegisterViewModel">

    <UserControl.Styles>
        <Style Selector="Button.auth-button:pointerover /template/ ContentPresenter">
            <Setter Property="Background" Value="#3E8F45" />
            <Setter Property="Foreground" Value="White" />
        </Style>
    </UserControl.Styles>

    <!--  ================= ROOT =================  -->
    <Grid>

        <!--  ================= DESKTOP =================  -->
        <Grid x:Name="DesktopLayout">

            <!--  Page Background  -->
            <Grid>

                <Image Source="avares://LehrplanGenerator/Assets/Images/test.jpg" Stretch="UniformToFill" />

                <!--  Centered Card  -->
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <Grid
                        Margin="24"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center">

                        <Border
                            Width="440"
                            Padding="40"
                            Background="{DynamicResource BgSecondary}"
                            CornerRadius="24">

                            <StackPanel Spacing="28">

                                <!--  Header  -->
                                <StackPanel Spacing="8">
                                    <TextBlock
                                        FontSize="28"
                                        FontWeight="Bold"
                                        Foreground="{DynamicResource TextPrimary}"
                                        Text="Konto erstellen"
                                        TextAlignment="Center" />

                                    <TextBlock
                                        FontSize="14"
                                        Foreground="{DynamicResource TextSecondary}"
                                        Text="Erstelle dein Konto für deinen persönlichen Lehrplan"
                                        TextAlignment="Center"
                                        TextWrapping="Wrap" />
                                </StackPanel>

                                <!--  Form  -->
                                <StackPanel Spacing="16">

                                    <StackPanel Spacing="6">
                                        <TextBlock
                                            FontSize="13"
                                            FontWeight="SemiBold"
                                            Foreground="{DynamicResource TextPrimary}"
                                            Text="Vorname" />
                                        <TextBox Text="{Binding FirstName}" Watermark="Vorname" />
                                    </StackPanel>

                                    <StackPanel Spacing="6">
                                        <TextBlock
                                            FontSize="13"
                                            FontWeight="SemiBold"
                                            Foreground="{DynamicResource TextPrimary}"
                                            Text="Nachname" />
                                        <TextBox Text="{Binding LastName}" Watermark="Nachname" />
                                    </StackPanel>

                                    <StackPanel Spacing="6">
                                        <TextBlock
                                            FontSize="13"
                                            FontWeight="SemiBold"
                                            Foreground="{DynamicResource TextPrimary}"
                                            Text="Benutzername" />
                                        <TextBox Text="{Binding Username}" Watermark="Benutzername" />
                                    </StackPanel>

                                    <StackPanel Spacing="6">
                                        <TextBlock
                                            FontSize="13"
                                            FontWeight="SemiBold"
                                            Foreground="{DynamicResource TextPrimary}"
                                            Text="Passwort" />
                                        <TextBox
                                            PasswordChar="*"
                                            Text="{Binding Password}"
                                            Watermark="Mindestens 8 Zeichen" />
                                    </StackPanel>

                                </StackPanel>

                                <!--  Error  -->
                                <TextBlock
                                    FontSize="13"
                                    Foreground="{DynamicResource TextError}"
                                    Text="{Binding ErrorMessage}"
                                    TextWrapping="Wrap" />

                                <!--  Primary Action  -->
                                <Button
                                    Height="44"
                                    Background="{DynamicResource AccentPrimary}"
                                    Classes="auth-button"
                                    Command="{Binding RegisterCommand}"
                                    Content="Konto erstellen"
                                    CornerRadius="8"
                                    Foreground="White" />

                                <!--  Secondary Action  -->
                                <StackPanel
                                    HorizontalAlignment="Center"
                                    Orientation="Horizontal"
                                    Spacing="4">

                                    <TextBlock
                                        VerticalAlignment="Center"
                                        FontSize="13"
                                        Foreground="{DynamicResource TextSecondary}"
                                        Text="Du hast bereits ein Konto?" />

                                    <Button
                                        MinHeight="0"
                                        Padding="0"
                                        VerticalAlignment="Center"
                                        Classes="link"
                                        Command="{Binding NavigateToLoginCommand}"
                                        Content="Anmelden"
                                        FontSize="13" />
                                </StackPanel>

                            </StackPanel>
                        </Border>
                    </Grid>
                </ScrollViewer>
            </Grid>
        </Grid>

        <!--  ================= MOBILE =================  -->
        <Grid x:Name="MobileLayout">

            <!--  BACKGROUND  -->
            <Image
                IsHitTestVisible="False"
                Source="avares://LehrplanGenerator/Assets/Images/test.jpg"
                Stretch="UniformToFill" />

            <!--  Dark overlay (optional, kannst du lassen oder entfernen)  -->
            <Border Background="#88000000" IsHitTestVisible="False" />

            <!--  CONTENT  -->
            <Grid RowDefinitions="Auto,Auto">

                <!--  PHONE PREVIEW IMAGE (liegt AUF dem Hintergrund)  -->
                <Border
                    Margin="16,32,16,8"
                    CornerRadius="20"
                    IsHitTestVisible="False">

                    <Image
                        MaxHeight="280"
                        HorizontalAlignment="Center"
                        Source="avares://LehrplanGenerator/Assets/Images/phone_screen.png"
                        Stretch="Uniform" />
                </Border>

                <!--  Bottom Sheet mit Formular  -->
                <Border
                    x:Name="MobileSheet"
                    Grid.Row="1"
                    Padding="24"
                    Background="{DynamicResource BgSecondary}"
                    CornerRadius="24,24,0,0">

                    <!--  wichtig für Keyboard-Animation  -->
                    <Border.RenderTransform>
                        <TranslateTransform />
                    </Border.RenderTransform>

                    <ScrollViewer VerticalScrollBarVisibility="Auto">

                        <StackPanel Spacing="16">

                            <!--  Header  -->
                            <StackPanel Spacing="4">
                                <TextBlock
                                    FontSize="22"
                                    FontWeight="Bold"
                                    Foreground="{DynamicResource TextPrimary}"
                                    Text="Konto erstellen" />

                                <TextBlock
                                    FontSize="13"
                                    Foreground="{DynamicResource TextSecondary}"
                                    Text="Erstelle dein Konto für deinen persönlichen Lehrplan"
                                    TextWrapping="Wrap" />
                            </StackPanel>

                            <!--  Form  -->
                            <StackPanel Spacing="12">
                                <TextBox Text="{Binding FirstName}" Watermark="Vorname" />
                                <TextBox Text="{Binding LastName}" Watermark="Nachname" />
                                <TextBox Text="{Binding Username}" Watermark="Benutzername" />
                                <TextBox
                                    PasswordChar="*"
                                    Text="{Binding Password}"
                                    Watermark="Mindestens 8 Zeichen" />
                            </StackPanel>

                            <!--  Error  -->
                            <TextBlock
                                FontSize="13"
                                Foreground="{DynamicResource TextError}"
                                Text="{Binding ErrorMessage}"
                                TextWrapping="Wrap" />

                            <!--  Primary Action  -->
                            <Button
                                Height="48"
                                Background="{DynamicResource AccentPrimary}"
                                Classes="auth-button"
                                Command="{Binding RegisterCommand}"
                                Content="Konto erstellen"
                                CornerRadius="8"
                                Foreground="White" />

                            <!--  Secondary Action  -->
                            <StackPanel
                                HorizontalAlignment="Center"
                                Orientation="Horizontal"
                                Spacing="4">

                                <TextBlock
                                    FontSize="13"
                                    Foreground="{DynamicResource TextSecondary}"
                                    Text="Bereits registriert?" />

                                <Button
                                    MinHeight="0"
                                    Padding="0"
                                    Classes="link"
                                    Command="{Binding NavigateToLoginCommand}"
                                    Content="Anmelden"
                                    FontSize="13" />
                            </StackPanel>

                            <!--  Abstand zur Android Navbar  -->
                            <Border Height="24" />

                        </StackPanel>
                    </ScrollViewer>
                </Border>
            </Grid>
        </Grid>

    </Grid>
</UserControl>
